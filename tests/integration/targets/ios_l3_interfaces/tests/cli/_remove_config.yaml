---
- name: L3_interface - remove configuration
  vars:
    lines: "interface Loopback 999\nip redirects\nip unreachables\n
      ipv6 redirects\nipv6 unreachables\nno ip address\ninterface
      GigabitEthernet 2\nno ip address\nno ipv6 address\n ip redirects\n
       ip unreachables\n ipv6 redirects\n ipv6 unreachables
      \ninterface GigabitEthernet3\n ip redirects\n ip unreachables\n
      \n ipv6 redirects\n ipv6 unreachables\n
      no ip address\nno ipv6 address\nno ip helper-address global 10.0.0.1
      \nno ip helper-address 10.0.0.2\n interface GigabitEthernet1 
      \n ip redirects\n ip unreachables\n ipv6 redirects\n ipv6 unreachables
       \ninterface GigabitEthernet4 
      \n ip redirects\n ip unreachables\n ipv6 redirects\n ipv6 unreachables"
  ansible.netcommon.cli_config:
    config: "{{ lines }}"

- name: Delete attributes of all configured interfaces
  register: result
  cisco.ios.ios_interfaces:
    config:
      - name: Loopback1
      - name: Vlan101
      - name: Vlan901
      - name: Vlan902
    state: purged

- name: Delete attributes of all configured interfaces
  register: result
  cisco.ios.ios_interfaces:
    config:
      - name: Port-channel10
      - name: Port-channel11
      - name: Port-channel22
      - name: Port-channel40
      - name: Loopback1
    state: purged
  retries: 2
  delay: 10
